# daec
Распределенный вычислитель арифметических выражений

## Проект

Проект состоит из 2 элементов:

- Orchestrator - сервер, который принимает арифметическое выражение, переводит его в
  набор последовательных задач и обеспечивает порядок их выполнения. 
- Agent - вычислитель, который может получить от "оркестратора" задачу, выполнить его и
  вернуть серверу результат.

## Сборка и запуск

Склонируйте это репозиторий
```sh
git clone https://github.com/Vojan-Najov/daec.git`
```
Перейдите в корневой каталог проекта.

### Linux
  - Собрать и запустить оркестратор командой:
  ```sh
  make orchestrator && source scripts/setenv.sh && ./orchestrator
  ```
  - Собрать и запустить agent командой:
  ```sh
  make agent && source scripts/setenv.sh && ./agent
  ```

Для запуска вам понадобится несколько вкладок терминала.
Вы также можете запустить процессы в фоновом режиме, используя символ `&`.
Потоки вывода следует перенаправить в файл, например `/dev/null`.
Например, чтобы запустить агент в фоновом режиме:
  ```sh
  make agent && source scripts/setenv.sh && ./agent 2>1 >/dev/null &
  ```
В таком случае не забудьте, остановить процессы, командой `kill -s SIGINT proccess_id`.
PID процесса можно узнать, с помощью команды `ps`

Чтобы изменять переменные окружения, модифицируйте файл `scripts/setenv.sh`

### Docker

Собрать приложение состоящее из оркестратора и трех агентов:
```sh
docker compose up
```
или 
```sh
docker compose up -d
```
чтобы запустить контейнеры в фоновом режиме.
```sh
docker compose down
```
чтобы остановить запущенные контейнеры или `CTRC-C`, если контейнеры запущены не в фоне.

Чтобы изменять переменные окружения, модифицируйте файл `.env`
